# VS Code Tauri v2 + Vue3 è°ƒè¯•æŒ‡å—

æœ¬æŒ‡å—ä¸“é—¨é’ˆå¯¹ VS Code ç¼–è¾‘å™¨ä¸­è°ƒè¯• Tauri v2 + Vue3 åº”ç”¨ç¨‹åºã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ¨èè°ƒè¯•æµç¨‹

1. **ä¸€é”®å¯åŠ¨è°ƒè¯•**ï¼š
   - æŒ‰ `F5` æˆ– `Ctrl+Shift+D` æ‰“å¼€è°ƒè¯•é¢æ¿
   - é€‰æ‹© **"ğŸŒŸ Full Stack Debug (Recommended)"**
   - è¿™ä¼šè‡ªåŠ¨å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨å’Œåç«¯è°ƒè¯•

2. **åˆ†æ­¥è°ƒè¯•**ï¼ˆå¦‚æœä¸€é”®å¯åŠ¨æœ‰é—®é¢˜ï¼‰ï¼š
   - é€‰æ‹© **"ğŸ”§ Tauri Backend Only"**
   - æ‰‹åŠ¨å¯åŠ¨å‰ç«¯ï¼šåœ¨ç»ˆç«¯è¿è¡Œ `yarn dev`

## ğŸ“‹ è°ƒè¯•é…ç½®è¯´æ˜

### 1. ğŸš€ Tauri Development (Full Stack)
- **ç”¨é€”**ï¼šå®Œæ•´çš„å…¨æ ˆå¼€å‘è°ƒè¯•
- **ç‰¹ç‚¹**ï¼š
  - è‡ªåŠ¨å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
  - è®¾ç½®å¼€å‘ç¯å¢ƒå˜é‡
  - å®Œæ•´çš„é”™è¯¯å›æº¯
- **ä½¿ç”¨åœºæ™¯**ï¼šæ—¥å¸¸å¼€å‘ï¼Œé¦–é€‰é…ç½®

### 2. ğŸ”§ Tauri Backend Only
- **ç”¨é€”**ï¼šä»…è°ƒè¯• Rust åç«¯
- **ç‰¹ç‚¹**ï¼š
  - éœ€è¦æ‰‹åŠ¨å¯åŠ¨å‰ç«¯
  - ä¸“æ³¨äºåç«¯é€»è¾‘è°ƒè¯•
  - æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦
- **ä½¿ç”¨åœºæ™¯**ï¼šåç«¯é€»è¾‘å¼€å‘ï¼Œå‰ç«¯å·²ç¨³å®š

### 3. ğŸ—ï¸ Tauri Production Debug
- **ç”¨é€”**ï¼šç”Ÿäº§æ¨¡å¼è°ƒè¯•
- **ç‰¹ç‚¹**ï¼š
  - ä½¿ç”¨ release æ„å»º
  - æ€§èƒ½æ¥è¿‘ç”Ÿäº§ç¯å¢ƒ
  - ä¼˜åŒ–çš„ä»£ç è°ƒè¯•
- **ä½¿ç”¨åœºæ™¯**ï¼šæ€§èƒ½æµ‹è¯•ï¼Œç”Ÿäº§é—®é¢˜æ’æŸ¥

### 4. ğŸ§ª Tauri Test Debug
- **ç”¨é€”**ï¼šå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- **ç‰¹ç‚¹**ï¼š
  - è¿è¡Œæµ‹è¯•å¥—ä»¶
  - å®Œæ•´çš„é”™è¯¯å›æº¯
  - æµ‹è¯•ç¯å¢ƒé…ç½®
- **ä½¿ç”¨åœºæ™¯**ï¼šæµ‹è¯•é©±åŠ¨å¼€å‘ï¼Œbug ä¿®å¤éªŒè¯

### 5. ğŸ¯ Tauri with Custom Args
- **ç”¨é€”**ï¼šä½¿ç”¨è‡ªå®šä¹‰å‚æ•°è°ƒè¯•
- **ç‰¹ç‚¹**ï¼š
  - å¯ä¼ é€’å‘½ä»¤è¡Œå‚æ•°
  - çµæ´»çš„å¯åŠ¨é…ç½®
  - æ”¯æŒä¸åŒè¿è¡Œæ¨¡å¼
- **ä½¿ç”¨åœºæ™¯**ï¼šç‰¹æ®Šåœºæ™¯æµ‹è¯•ï¼ŒåŠŸèƒ½éªŒè¯

### 6. ğŸ”— Attach to Running Tauri Process
- **ç”¨é€”**ï¼šé™„åŠ åˆ°å·²è¿è¡Œçš„è¿›ç¨‹
- **ç‰¹ç‚¹**ï¼š
  - ä¸é‡æ–°å¯åŠ¨åº”ç”¨
  - è°ƒè¯•æ­£åœ¨è¿è¡Œçš„å®ä¾‹
  - é€‚åˆé•¿æ—¶é—´è¿è¡Œåœºæ™¯
- **ä½¿ç”¨åœºæ™¯**ï¼šç”Ÿäº§ç¯å¢ƒè°ƒè¯•ï¼Œè¿›ç¨‹åˆ†æ

## ğŸ›  å¯ç”¨ä»»åŠ¡

é€šè¿‡ `Ctrl+Shift+P` â†’ "Tasks: Run Task" å¯ä»¥è¿è¡Œï¼š

### å¼€å‘ä»»åŠ¡
- **start-frontend-dev-server**ï¼šå¯åŠ¨ Vue3 å¼€å‘æœåŠ¡å™¨
- **prepare-debug**ï¼šå‡†å¤‡è°ƒè¯•ç¯å¢ƒï¼ˆè¯­è¨€æ–‡ä»¶ç­‰ï¼‰
- **tauri-dev**ï¼šå¯åŠ¨å®Œæ•´ Tauri å¼€å‘ç¯å¢ƒ

### æ„å»ºä»»åŠ¡
- **cargo-check-tauri**ï¼šæ£€æŸ¥ Rust ä»£ç è¯­æ³•
- **cargo-build-tauri-debug**ï¼šæ„å»º Debug ç‰ˆæœ¬
- **cargo-build-tauri-release**ï¼šæ„å»º Release ç‰ˆæœ¬
- **build-frontend-production**ï¼šæ„å»ºå‰ç«¯ç”Ÿäº§ç‰ˆæœ¬

### ç»´æŠ¤ä»»åŠ¡
- **clean-all**ï¼šæ¸…ç†æ‰€æœ‰æ„å»ºç¼“å­˜
- **kill-dev-server**ï¼šåœæ­¢å¼€å‘æœåŠ¡å™¨
- **install-dependencies**ï¼šå®‰è£…é¡¹ç›®ä¾èµ–

## ğŸ”§ æ–­ç‚¹å’Œè°ƒè¯•æŠ€å·§

### Rust åç«¯è°ƒè¯•
1. **è®¾ç½®æ–­ç‚¹**ï¼š
   - åœ¨ `.rs` æ–‡ä»¶ä¸­ç‚¹å‡»è¡Œå·å·¦ä¾§è®¾ç½®æ–­ç‚¹
   - ä½¿ç”¨æ¡ä»¶æ–­ç‚¹ï¼šå³é”®æ–­ç‚¹ â†’ "Edit Breakpoint"

2. **å˜é‡æ£€æŸ¥**ï¼š
   - æ‚¬åœæŸ¥çœ‹å˜é‡å€¼
   - åœ¨ "Variables" é¢æ¿æŸ¥çœ‹ä½œç”¨åŸŸå˜é‡
   - åœ¨ "Watch" é¢æ¿æ·»åŠ è¡¨è¾¾å¼

3. **è°ƒç”¨å †æ ˆ**ï¼š
   - "Call Stack" é¢æ¿æ˜¾ç¤ºå‡½æ•°è°ƒç”¨é“¾
   - ç‚¹å‡»å †æ ˆå¸§åˆ‡æ¢ä¸Šä¸‹æ–‡

### Vue3 å‰ç«¯è°ƒè¯•
1. **æµè§ˆå™¨å¼€å‘è€…å·¥å…·**ï¼š
   - åœ¨åº”ç”¨çª—å£å³é”® â†’ "Inspect Element"
   - ä½¿ç”¨ Vue DevTools æ‰©å±•

2. **æºç æ˜ å°„**ï¼š
   - TypeScript/JavaScript æ–­ç‚¹ä¼šè‡ªåŠ¨æ˜ å°„
   - åœ¨ Sources é¢æ¿è®¾ç½®æ–­ç‚¹

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜ï¼šå‰ç«¯æœåŠ¡å™¨å¯åŠ¨å¤±è´¥
**ç—‡çŠ¶**ï¼š`start-frontend-dev-server` ä»»åŠ¡å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -ti:1420

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 $(lsof -ti:1420)

# é‡æ–°å®‰è£…ä¾èµ–
yarn install
```

### é—®é¢˜ï¼šRust ç¼–è¯‘é”™è¯¯
**ç—‡çŠ¶**ï¼šæ„å»ºå¤±è´¥ï¼Œçº¢è‰²é”™è¯¯æç¤º

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. è¿è¡Œ `cargo-check-tauri` ä»»åŠ¡æŸ¥çœ‹è¯¦ç»†é”™è¯¯
2. æ£€æŸ¥ Rust ä»£ç è¯­æ³•
3. ç¡®ä¿ä¾èµ–ç‰ˆæœ¬å…¼å®¹

### é—®é¢˜ï¼šè°ƒè¯•å™¨æ— æ³•é™„åŠ 
**ç—‡çŠ¶**ï¼šæ–­ç‚¹ä¸ç”Ÿæ•ˆï¼Œæ— æ³•æš‚åœæ‰§è¡Œ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿ä½¿ç”¨ Debug æ„å»ºï¼ˆä¸æ˜¯ Releaseï¼‰
2. æ£€æŸ¥ `launch.json` ä¸­çš„ `sourceLanguages` è®¾ç½®
3. é‡æ–°å¯åŠ¨ VS Code å’Œè°ƒè¯•ä¼šè¯

### é—®é¢˜ï¼šç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ
**ç—‡çŠ¶**ï¼š`RUST_LOG` ç­‰ç¯å¢ƒå˜é‡æ— æ•ˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `launch.json` ä¸­çš„ `env` é…ç½®
2. ç¡®è®¤ç»ˆç«¯ç¯å¢ƒå˜é‡è®¾ç½®
3. é‡å¯ VS Code ä½¿è®¾ç½®ç”Ÿæ•ˆ

## ğŸ“ é¡¹ç›®ç»“æ„å’Œé…ç½®æ–‡ä»¶

```
chatspeed/
â”œâ”€â”€ .vscode/
â”‚   â”œâ”€â”€ launch.json          # è°ƒè¯•é…ç½®
â”‚   â”œâ”€â”€ tasks.json           # ä»»åŠ¡é…ç½®
â”‚   â”œâ”€â”€ settings.json        # å·¥ä½œåŒºè®¾ç½®
â”‚   â””â”€â”€ extensions.json      # æ¨èæ‰©å±•
â”œâ”€â”€ src-tauri/
â”‚   â”œâ”€â”€ Cargo.toml          # Rust é¡¹ç›®é…ç½®
â”‚   â”œâ”€â”€ tauri.conf.json     # Tauri é…ç½®
â”‚   â””â”€â”€ src/                # Rust æºç 
â”œâ”€â”€ src/                    # Vue3 å‰ç«¯æºç 
â”œâ”€â”€ Makefile               # æ„å»ºè„šæœ¬
â””â”€â”€ VSCODE_DEBUG_GUIDE.md  # æœ¬æŒ‡å—
```

## âš™ï¸ é«˜çº§é…ç½®

### è‡ªå®šä¹‰è°ƒè¯•é…ç½®
åœ¨ `launch.json` ä¸­æ·»åŠ æ–°é…ç½®ï¼š
```json
{
  "type": "lldb",
  "request": "launch",
  "name": "My Custom Debug",
  "cargo": {
    "args": ["build", "--manifest-path=./src-tauri/Cargo.toml", "--features", "my-feature"]
  },
  "env": {
    "MY_ENV_VAR": "value"
  }
}
```

### Rust-analyzer ä¼˜åŒ–
åœ¨ `settings.json` ä¸­è°ƒæ•´ï¼š
```json
{
  "rust-analyzer.checkOnSave.command": "clippy",
  "rust-analyzer.cargo.allFeatures": true,
  "rust-analyzer.inlayHints.typeHints.enable": false
}
```

### æ€§èƒ½è°ƒè¯•
1. **å†…å­˜ä½¿ç”¨**ï¼š
```json
{
  "env": {
    "RUST_LOG": "debug",
    "RUST_BACKTRACE": "full"
  }
}
```

2. **æ€§èƒ½åˆ†æ**ï¼š
```bash
# ä½¿ç”¨ perf å·¥å…·
cargo build --release
perf record target/release/chatspeed
perf report
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å¼€å‘å·¥ä½œæµ
1. å§‹ç»ˆä½¿ç”¨ "ğŸš€ Tauri Development (Full Stack)" å¼€å§‹
2. é‡åˆ°é—®é¢˜æ—¶åˆ‡æ¢åˆ° "ğŸ”§ Tauri Backend Only"
3. å®šæœŸè¿è¡Œ `cargo-check-tauri` æ£€æŸ¥ä»£ç è´¨é‡

### 2. è°ƒè¯•ç­–ç•¥
1. **é€æ­¥è°ƒè¯•**ï¼šä»ç®€å•åœºæ™¯å¼€å§‹ï¼Œé€æ­¥å¢åŠ å¤æ‚åº¦
2. **æ—¥å¿—å…ˆè¡Œ**ï¼šåœ¨å…³é”®ä½ç½®æ·»åŠ  `log::debug!()` è¯­å¥  
3. **å•å…ƒæµ‹è¯•**ï¼šä½¿ç”¨ "ğŸ§ª Tauri Test Debug" éªŒè¯å•ä¸ªåŠŸèƒ½

### 3. æ€§èƒ½ä¼˜åŒ–
1. å¼€å‘æ—¶ä½¿ç”¨ Debug æ„å»º
2. æ€§èƒ½æµ‹è¯•ä½¿ç”¨ "ğŸ—ï¸ Tauri Production Debug"
3. ç›‘æ§å†…å­˜ä½¿ç”¨å’Œ CPU å ç”¨

### 4. å›¢é˜Ÿåä½œ
1. ç»Ÿä¸€ä½¿ç”¨ç›¸åŒçš„ VS Code é…ç½®
2. å®šæœŸæ›´æ–° `.vscode/` é…ç½®æ–‡ä»¶
3. æ–‡æ¡£åŒ–ç‰¹æ®Šè°ƒè¯•åœºæ™¯

## ğŸ“ è·å–å¸®åŠ©

### å¸¸ç”¨å‘½ä»¤
```bash
# æ£€æŸ¥ç¯å¢ƒä¿¡æ¯
yarn tauri info

# æ¸…ç†å¹¶é‡æ–°å¼€å§‹
make clean && yarn install

# æ£€æŸ¥ Rust å·¥å…·é“¾
rustc --version && cargo --version
```

### æ—¥å¿—æŸ¥çœ‹
- **åç«¯æ—¥å¿—**ï¼šVS Code Debug Console
- **å‰ç«¯æ—¥å¿—**ï¼šæµè§ˆå™¨å¼€å‘è€…å·¥å…· Console
- **æ„å»ºæ—¥å¿—**ï¼šVS Code Terminal é¢æ¿

### ç›¸å…³èµ„æº
- [Tauri v2 å®˜æ–¹æ–‡æ¡£](https://v2.tauri.app/)
- [VS Code è°ƒè¯•æŒ‡å—](https://code.visualstudio.com/docs/editor/debugging)
- [Rust-analyzer ç”¨æˆ·æ‰‹å†Œ](https://rust-analyzer.github.io/manual.html)
- [Vue.js å¼€å‘è€…å·¥å…·](https://devtools.vuejs.org/)

## ğŸ”„ é…ç½®ç‰ˆæœ¬å†å²

- **v1.0**ï¼šåŸºç¡€è°ƒè¯•é…ç½®
- **v1.1**ï¼šæ·»åŠ ç”Ÿäº§æ¨¡å¼è°ƒè¯•
- **v1.2**ï¼šä¼˜åŒ–ä»»åŠ¡ä¾èµ–å’Œé”™è¯¯å¤„ç†
- **v1.3**ï¼šæ·»åŠ æµ‹è¯•è°ƒè¯•å’Œè‡ªå®šä¹‰å‚æ•°æ”¯æŒ
- **v1.4**ï¼šå®Œå–„å‰ç«¯è°ƒè¯•é…ç½®å’Œæ–‡æ¡£

æœ€åæ›´æ–°ï¼š2024å¹´