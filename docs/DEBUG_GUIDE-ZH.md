# Tauri v2 + Vue3 è°ƒè¯•æŒ‡å—

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•åœ¨ Zed ç¼–è¾‘å™¨ä¸­è°ƒè¯• Tauri v2 åº”ç”¨ç¨‹åºã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1ï¼šå®Œæ•´åº”ç”¨è°ƒè¯•ï¼ˆæ¨èï¼‰

1. åœ¨ Zed ä¸­æŒ‰ `F4` æˆ– `Cmd+Shift+P` â†’ "debugger: start"
2. é€‰æ‹© **"Debug Tauri App (Full Stack)"**
3. è¿™ä¼šè‡ªåŠ¨å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨å’Œåç«¯è°ƒè¯•

### æ–¹æ³•2ï¼šåˆ†æ­¥è°ƒè¯•

å¦‚æœæ–¹æ³•1ä¸å·¥ä½œï¼Œä½¿ç”¨åˆ†æ­¥è°ƒè¯•ï¼š

1. **å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨**ï¼š
   - æŒ‰ `Cmd+Shift+P` â†’ "task: spawn"
   - é€‰æ‹© **"Start Frontend Dev Server"**
   - æˆ–åœ¨ç»ˆç«¯è¿è¡Œï¼š`yarn dev`

2. **ç­‰å¾…å‰ç«¯æœåŠ¡å™¨å¯åŠ¨**ï¼ˆé€šå¸¸åœ¨ http://localhost:1420ï¼‰

3. **å¯åŠ¨åç«¯è°ƒè¯•**ï¼š
   - æŒ‰ `F4` â†’ "debugger: start"
   - é€‰æ‹© **"Debug Backend (Dev Mode)"**

## ğŸ“‹ å¯ç”¨çš„è°ƒè¯•é…ç½®

### 1. Debug Tauri App (Full Stack)
- **ç”¨é€”**ï¼šå®Œæ•´çš„åº”ç”¨è°ƒè¯•
- **ç‰¹ç‚¹**ï¼šè‡ªåŠ¨å¯åŠ¨å‰ç«¯å’Œåç«¯
- **æ¨èåœºæ™¯**ï¼šæ—¥å¸¸å¼€å‘è°ƒè¯•

### 2. Build & Debug Rust Backend
- **ç”¨é€”**ï¼šä»…è°ƒè¯• Rust åç«¯
- **ç‰¹ç‚¹**ï¼šéœ€è¦æ‰‹åŠ¨å¯åŠ¨å‰ç«¯
- **æ¨èåœºæ™¯**ï¼šä¸“æ³¨äºåç«¯é€»è¾‘è°ƒè¯•

### 3. Debug Backend (Dev Mode)
- **ç”¨é€”**ï¼šå¼€å‘æ¨¡å¼ä¸‹è°ƒè¯•åç«¯
- **ç‰¹ç‚¹**ï¼šç¦ç”¨é»˜è®¤ç‰¹æ€§ï¼Œè¿æ¥åˆ°å¼€å‘æœåŠ¡å™¨
- **æ¨èåœºæ™¯**ï¼šå‰ç«¯å·²ç»åœ¨è¿è¡Œæ—¶ä½¿ç”¨

### 4. Debug with Custom Args
- **ç”¨é€”**ï¼šä½¿ç”¨è‡ªå®šä¹‰å‚æ•°è°ƒè¯•
- **ç‰¹ç‚¹**ï¼šå¯ä¼ é€’å‘½ä»¤è¡Œå‚æ•°
- **æ¨èåœºæ™¯**ï¼šéœ€è¦ç‰¹å®šå¯åŠ¨å‚æ•°æ—¶

## ğŸ›  å¯ç”¨çš„ä»»åŠ¡

é€šè¿‡ `Cmd+Shift+P` â†’ "task: spawn" å¯ä»¥è¿è¡Œä»¥ä¸‹ä»»åŠ¡ï¼š

- **Start Frontend Dev Server**ï¼šå¯åŠ¨ Vue3 å¼€å‘æœåŠ¡å™¨
- **Build Frontend**ï¼šæ„å»ºå‰ç«¯èµ„æº
- **Tauri Dev (Full Stack)**ï¼šå¯åŠ¨å®Œæ•´çš„ Tauri å¼€å‘ç¯å¢ƒ
- **Tauri Build**ï¼šæ„å»ºå‘å¸ƒç‰ˆæœ¬
- **Cargo Check (Tauri)**ï¼šæ£€æŸ¥ Rust ä»£ç 
- **Cargo Build (Tauri)**ï¼šæ„å»º Rust åç«¯
- **Cargo Build (Dev Mode)**ï¼šä»¥å¼€å‘æ¨¡å¼æ„å»º
- **Tauri Info**ï¼šæ˜¾ç¤ºç¯å¢ƒä¿¡æ¯
- **Clean All**ï¼šæ¸…ç†æ‰€æœ‰æ„å»ºç¼“å­˜

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜ï¼šç•Œé¢çœ‹ä¸åˆ°ï¼Œä½†ç¨‹åºæ­£åœ¨è¿è¡Œ

**ç—‡çŠ¶**ï¼šç¨‹åºå¯åŠ¨æ­£å¸¸ï¼ŒçŠ¶æ€æ å’Œ dock æœ‰å›¾æ ‡ï¼Œä½†çª—å£ä¸æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿å‰ç«¯å¼€å‘æœåŠ¡å™¨åœ¨ http://localhost:1420 è¿è¡Œ
2. æ£€æŸ¥ `tauri.conf.json` ä¸­çš„ `devUrl` é…ç½®
3. ä½¿ç”¨ "Debug Backend (Dev Mode)" é…ç½®

### é—®é¢˜ï¼šcargo tauri å‘½ä»¤ä¸å­˜åœ¨

**ç—‡çŠ¶**ï¼š`error: no such command: 'tauri'`

**åŸå› **ï¼šTauri v2 CLI é€šè¿‡ npm/yarn å®‰è£…ï¼Œä¸æ˜¯ cargo å­å‘½ä»¤

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨ `yarn tauri` è€Œä¸æ˜¯ `cargo tauri`

### é—®é¢˜ï¼šç«¯å£è¢«å ç”¨

**ç—‡çŠ¶**ï¼šå‰ç«¯æœåŠ¡å™¨æ— æ³•å¯åŠ¨ï¼Œç«¯å£ 1420 è¢«å ç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -ti:1420

# æ€æ­»è¿›ç¨‹
kill -9 $(lsof -ti:1420)

# æˆ–ä½¿ç”¨è°ƒè¯•è„šæœ¬
./debug.sh
```

### é—®é¢˜ï¼šè°ƒè¯•å™¨æ— æ³•é™„åŠ 

**ç—‡çŠ¶**ï¼šè°ƒè¯•å™¨å¯åŠ¨ä½†æ— æ³•è®¾ç½®æ–­ç‚¹

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿ä½¿ç”¨ `CodeLLDB` é€‚é…å™¨
2. æ£€æŸ¥æ˜¯å¦åœ¨ Debug æ¨¡å¼ä¸‹æ„å»º
3. å°è¯•é‡æ–°æ„å»ºï¼š`cargo build --manifest-path src-tauri/Cargo.toml`

## ğŸ“ æ–‡ä»¶ç»“æ„

```
chatspeed/
â”œâ”€â”€ .zed/
â”‚   â”œâ”€â”€ debug.json          # è°ƒè¯•é…ç½®
â”‚   â””â”€â”€ tasks.json          # ä»»åŠ¡é…ç½®
â”œâ”€â”€ src-tauri/
â”‚   â”œâ”€â”€ Cargo.toml          # Rust é¡¹ç›®é…ç½®
â”‚   â”œâ”€â”€ tauri.conf.json     # Tauri é…ç½®
â”‚   â””â”€â”€ src/
â”‚       â””â”€â”€ main.rs         # Rust ä¸»ç¨‹åº
â”œâ”€â”€ src/                    # Vue3 å‰ç«¯æºç 
â”œâ”€â”€ dist/                   # æ„å»ºè¾“å‡º
â”œâ”€â”€ debug.sh                # è°ƒè¯•è¾…åŠ©è„šæœ¬
â””â”€â”€ DEBUG_GUIDE.md          # æœ¬æŒ‡å—
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å¼€å‘æµç¨‹
1. åœ¨ä¸€ä¸ªç»ˆç«¯çª—å£ä¿æŒ `yarn dev` è¿è¡Œ
2. åœ¨ Zed ä¸­ä½¿ç”¨ "Debug Backend (Dev Mode)" è¿›è¡Œåç«¯è°ƒè¯•
3. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·è°ƒè¯•å‰ç«¯

### 2. æ–­ç‚¹è®¾ç½®
- åœ¨ Rust ä»£ç ä¸­è®¾ç½®æ–­ç‚¹è¿›è¡Œåç«¯è°ƒè¯•
- åœ¨åº”ç”¨çª—å£å³é”® â†’ "Inspect Element" è°ƒè¯•å‰ç«¯

### 3. æ—¥å¿—æŸ¥çœ‹
- åç«¯æ—¥å¿—ï¼šåœ¨ Zed è°ƒè¯•æ§åˆ¶å°æŸ¥çœ‹
- å‰ç«¯æ—¥å¿—ï¼šåœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…· Console æŸ¥çœ‹
- è®¾ç½® `RUST_LOG=debug` ç¯å¢ƒå˜é‡è·å–è¯¦ç»†æ—¥å¿—

### 4. æ€§èƒ½è°ƒè¯•
- ä½¿ç”¨ Release æ¨¡å¼æ„å»ºè¿›è¡Œæ€§èƒ½æµ‹è¯•
- å¯ç”¨ Rust çš„æ€§èƒ½åˆ†æå·¥å…·
- ä½¿ç”¨æµè§ˆå™¨æ€§èƒ½å·¥å…·åˆ†æå‰ç«¯

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æ£€æŸ¥ `yarn tauri info` è¾“å‡ºçš„ç¯å¢ƒä¿¡æ¯
2. æŸ¥çœ‹ Zed çš„è°ƒè¯•è¾“å‡ºé¢æ¿
3. æ£€æŸ¥ç»ˆç«¯ä¸­çš„é”™è¯¯ä¿¡æ¯
4. å‚è€ƒ [Tauri å®˜æ–¹æ–‡æ¡£](https://tauri.app/v1/guides/debugging/application)
5. ä½¿ç”¨ `./debug.sh` è„šæœ¬è¿›è¡Œè‡ªåŠ¨åŒ–è°ƒè¯•

## ğŸ”— ç›¸å…³é“¾æ¥

- [Tauri v2 æ–‡æ¡£](https://v2.tauri.app/)
- [Zed è°ƒè¯•å™¨æ–‡æ¡£](https://zed.dev/docs/debugger)
- [CodeLLDB æ–‡æ¡£](https://github.com/vadimcn/codelldb)
- [Vue.js è°ƒè¯•æŒ‡å—](https://vuejs.org/guide/scaling-up/tooling.html#browser-devtools)